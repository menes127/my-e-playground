CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE ACL_SID(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 100) NOT NULL,PRINCIPAL INTEGER,SID VARCHAR(100),CONSTRAINT PK_ACL_SID PRIMARY KEY(ID),CONSTRAINT UK_ACL_SID UNIQUE(SID,PRINCIPAL))
CREATE MEMORY TABLE ACL_CLASS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 100) NOT NULL,CLASS VARCHAR(100),CONSTRAINT PK_SCL_CLASS PRIMARY KEY(ID),CONSTRAINT UK_ACL_CLASS UNIQUE(CLASS))
CREATE MEMORY TABLE ACL_OBJECT_IDENTITY(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 100) NOT NULL,OBJECT_ID_CLASS BIGINT,OBJECT_ID_IDENTITY BIGINT,PARENT_OBJECT BIGINT,OWNER_SID BIGINT,ENTRIES_INHERITING INTEGER,CONSTRAINT PK_ACL_OBJECT_IDENTITY PRIMARY KEY(ID),CONSTRAINT UK_OBJECT_IDENTITY UNIQUE(OBJECT_ID_CLASS,OBJECT_ID_IDENTITY),CONSTRAINT FK_OBJECT_IDENTITY_PARENT_OBJECT FOREIGN KEY(PARENT_OBJECT) REFERENCES ACL_OBJECT_IDENTITY(ID),CONSTRAINT FK_OBJECT_IDENTITY_OBJECT_ID_CLASS FOREIGN KEY(OBJECT_ID_CLASS) REFERENCES ACL_CLASS(ID),CONSTRAINT FK_OBJECT_IDENTITY_OWNER_SID FOREIGN KEY(OWNER_SID) REFERENCES ACL_SID(ID))
CREATE MEMORY TABLE ACL_ENTRY(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 100) NOT NULL,ACL_OBJECT_IDENTITY BIGINT,ACE_ORDER INTEGER,SID BIGINT,MASK INTEGER,GRANTING INTEGER,AUDIT_SUCCESS INTEGER,AUDIT_FAILURE INTEGER,CONSTRAINT PK_ACL_ENTRY PRIMARY KEY(ID),CONSTRAINT UK_ACL_ENTRY UNIQUE(ACL_OBJECT_IDENTITY,ACE_ORDER),CONSTRAINT FK_ACL_ENTRY_ACL_OBJECT_IDENTITY FOREIGN KEY(ACL_OBJECT_IDENTITY) REFERENCES ACL_OBJECT_IDENTITY(ID),CONSTRAINT FK_ACL_ENTRY_SID FOREIGN KEY(SID) REFERENCES ACL_SID(ID))
ALTER TABLE ACL_SID ALTER COLUMN ID RESTART WITH 105
ALTER TABLE ACL_CLASS ALTER COLUMN ID RESTART WITH 105
ALTER TABLE ACL_OBJECT_IDENTITY ALTER COLUMN ID RESTART WITH 120
ALTER TABLE ACL_ENTRY ALTER COLUMN ID RESTART WITH 112
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 10
SET SCHEMA PUBLIC
INSERT INTO ACL_SID VALUES(104,1,'user')
INSERT INTO ACL_CLASS VALUES(104,'com.family168.springsecuritybook.ch303.Account')
INSERT INTO ACL_OBJECT_IDENTITY VALUES(117,104,1248245387977,NULL,104,1)
INSERT INTO ACL_OBJECT_IDENTITY VALUES(118,104,1248245596403,NULL,104,1)
